var rn=Object.defineProperty;var zr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var Zr=(e,t)=>{for(var n in t)rn(e,n,{get:t[n],enumerable:!0})},ei=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Jr(t))!Qr.call(e,i)&&i!==n&&rn(e,i,{get:()=>t[i],enumerable:!(r=zr(t,i))||r.enumerable});return e};var ti=e=>ei(rn({},"__esModule",{value:!0}),e);var mo={};Zr(mo,{default:()=>at});module.exports=ti(mo);var oe=require("obsidian");var ut=require("obsidian"),me,Fe,Rn=0,He;function Nn(e){He=e}function dt(){return me}function Ht(){return Fe}function Vt(){if(He.snwPluginActivelyShowingCounts!=!0)return;Fe=He.app.fileManager.getAllLinkResolutions();let e=Object.entries(app.metadataCache.metadataCache).filter(r=>{var i,o;return(o=(i=r[1])==null?void 0:i.frontmatter)==null?void 0:o["snw-index-exclude"]}),t=Object.entries(app.metadataCache.fileCache).filter(r=>e.find(i=>i[0]===r[1].hash));for(let r=0;r<Fe.length;r++){Fe[r].excludedFile=!1;let i=Fe[r].resolvedFile.path;for(let o=0;o<t.length;o++)if(i==t[o][0]){Fe[r].excludedFile=!0;break}}me=Fe.reduce((r,i)=>{let o="",a="";return o=i.reference.link,a=i.resolvedFile.path.replace(i.resolvedFile.name,"")+i.reference.link,o===a&&(a=null),r[o]||(r[o]=[]),r[o].push(i),a!=null&&(r[a]||(r[a]=[]),r[a].push(i)),r},{}),window.snwAPI.references=me,Rn=Date.now()}var on=new Map;function ge(e){if(He.snwPluginActivelyShowingCounts!=!0)return;if(on.has(e.path)){let i=on.get(e.path);if(Rn<i.createDate&&i.createDate+He.settings.cacheUpdateInMilliseconds>Date.now())return i}let t={},n=He.app.metadataCache.getFileCache(e);if(!n)return t;me||Vt();let r=Object.values(He.app.metadataCache.metadataCache).reduce((i,o)=>{let a=o.headings;return a&&a.forEach(l=>{i.push(l.heading)}),i},[]);if(n!=null&&n.blocks){let i=e.path.replace(".md","");t.blocks=Object.values(n.blocks).map(o=>({key:i+"#^"+o.id,pos:o.position,page:e.basename,type:"block",references:me[i+"#^"+o.id]||[]}))}return n!=null&&n.headings&&(t.headings=n.headings.map(i=>({original:"#".repeat(i.level)+" "+i.heading,key:`${e.path.replace(".md","")}#${(0,ut.stripHeading)(i.heading)}`,headerMatch:i.heading,headerMatch2:e.basename+"#"+i.heading,pos:i.position,page:e.basename,type:"heading",references:me[`${e.path.replace(".md","")}#${(0,ut.stripHeading)(i.heading)}`]||me[`${e.basename}$#${(0,ut.stripHeading)(i.heading)}`]||[]}))),n!=null&&n.links&&(t.links=n.links.map(i=>({key:i.link,original:i.original,type:"link",pos:i.position,page:e.basename,references:me[i.link]||[]})),t.links&&(t.links=t.links.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")){let o=r.filter(a=>(0,ut.stripHeading)(a)===i.key.split("#")[1])[0];i.original=o||void 0}return i}))),n!=null&&n.embeds&&(t.embeds=n.embeds.map(i=>({key:i.link,page:e.basename,type:"embed",pos:i.position,references:me[i.link]||[]})),t.embeds&&(t.embeds=t.embeds.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")&&t.headings){let o=r.filter(a=>a.includes(i.key.split("#")[1]))[0];i.original=o||void 0}return(i.key.startsWith("#^")||i.key.startsWith("#"))&&(i.key=`${e.basename}${i.key}`,i.references=me[i.key]||[]),i}))),t.cacheMetaData=n,t.createDate=Date.now(),on.set(e.path,t),t}var ke=require("@codemirror/view"),Ar=require("obsidian");var R="top",B="bottom",V="right",H="left",Wt="auto",Ie=[R,B,V,H],xe="start",Ve="end",Fn="clippingParents",Bt="viewport",Qe="popper",Hn="reference",an=Ie.reduce(function(e,t){return e.concat([t+"-"+xe,t+"-"+Ve])},[]),jt=[].concat(Ie,[Wt]).reduce(function(e,t){return e.concat([t,t+"-"+xe,t+"-"+Ve])},[]),ni="beforeRead",ri="read",ii="afterRead",oi="beforeMain",ai="main",si="afterMain",li="beforeWrite",pi="write",ci="afterWrite",Vn=[ni,ri,ii,oi,ai,si,li,pi,ci];function _(e){return e?(e.nodeName||"").toLowerCase():null}function A(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ee(e){var t=A(e).Element;return e instanceof t||e instanceof Element}function j(e){var t=A(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ze(e){if(typeof ShadowRoot=="undefined")return!1;var t=A(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function fi(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!j(o)||!_(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var l=i[a];l===!1?o.removeAttribute(a):o.setAttribute(a,l===!0?"":l)}))})}function ui(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),l=a.reduce(function(s,u){return s[u]="",s},{});!j(i)||!_(i)||(Object.assign(i.style,l),Object.keys(o).forEach(function(s){i.removeAttribute(s)}))})}}var mt={name:"applyStyles",enabled:!0,phase:"write",fn:fi,effect:ui,requires:["computeStyles"]};function U(e){return e.split("-")[0]}var se=Math.max,We=Math.min,Ee=Math.round;function et(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function gt(){return!/^((?!chrome|android).)*safari/i.test(et())}function te(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&j(e)&&(i=e.offsetWidth>0&&Ee(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ee(r.height)/e.offsetHeight||1);var a=ee(e)?A(e):window,l=a.visualViewport,s=!gt()&&n,u=(r.left+(s&&l?l.offsetLeft:0))/i,c=(r.top+(s&&l?l.offsetTop:0))/o,m=r.width/i,g=r.height/o;return{width:m,height:g,top:c,right:u+m,bottom:c+g,left:u,x:u,y:c}}function Be(e){var t=te(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ht(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ze(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function K(e){return A(e).getComputedStyle(e)}function sn(e){return["table","td","th"].indexOf(_(e))>=0}function q(e){return((ee(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ce(e){return _(e)==="html"?e:e.assignedSlot||e.parentNode||(Ze(e)?e.host:null)||q(e)}function Wn(e){return!j(e)||K(e).position==="fixed"?null:e.offsetParent}function di(e){var t=/firefox/i.test(et()),n=/Trident/i.test(et());if(n&&j(e)){var r=K(e);if(r.position==="fixed")return null}var i=Ce(e);for(Ze(i)&&(i=i.host);j(i)&&["html","body"].indexOf(_(i))<0;){var o=K(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function le(e){for(var t=A(e),n=Wn(e);n&&sn(n)&&K(n).position==="static";)n=Wn(n);return n&&(_(n)==="html"||_(n)==="body"&&K(n).position==="static")?t:n||di(e)||t}function je(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _e(e,t,n){return se(e,We(t,n))}function Bn(e,t,n){var r=_e(e,t,n);return r>n?n:r}function vt(){return{top:0,right:0,bottom:0,left:0}}function wt(e){return Object.assign({},vt(),e)}function bt(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var mi=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,wt(typeof t!="number"?t:bt(t,Ie))};function gi(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,l=U(n.placement),s=je(l),u=[H,V].indexOf(l)>=0,c=u?"height":"width";if(!(!o||!a)){var m=mi(i.padding,n),g=Be(o),d=s==="y"?R:H,b=s==="y"?B:V,w=n.rects.reference[c]+n.rects.reference[s]-a[s]-n.rects.popper[c],y=a[s]-n.rects.reference[s],x=le(o),k=x?s==="y"?x.clientHeight||0:x.clientWidth||0:0,L=w/2-y/2,p=m[d],E=k-g[c]-m[b],h=k/2-g[c]/2+L,O=_e(p,h,E),N=s;n.modifiersData[r]=(t={},t[N]=O,t.centerOffset=O-h,t)}}function hi(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||!ht(t.elements.popper,i)||(t.elements.arrow=i))}var jn={name:"arrow",enabled:!0,phase:"main",fn:gi,effect:hi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ne(e){return e.split("-")[1]}var vi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function wi(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:Ee(t*i)/i||0,y:Ee(n*i)/i||0}}function _n(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,l=e.position,s=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,m=e.isFixed,g=a.x,d=g===void 0?0:g,b=a.y,w=b===void 0?0:b,y=typeof c=="function"?c({x:d,y:w}):{x:d,y:w};d=y.x,w=y.y;var x=a.hasOwnProperty("x"),k=a.hasOwnProperty("y"),L=H,p=R,E=window;if(u){var h=le(n),O="clientHeight",N="clientWidth";if(h===A(n)&&(h=q(n),K(h).position!=="static"&&l==="absolute"&&(O="scrollHeight",N="scrollWidth")),h=h,i===R||(i===H||i===V)&&o===Ve){p=B;var F=m&&h===E&&E.visualViewport?E.visualViewport.height:h[O];w-=F-r.height,w*=s?1:-1}if(i===H||(i===R||i===B)&&o===Ve){L=V;var M=m&&h===E&&E.visualViewport?E.visualViewport.width:h[N];d-=M-r.width,d*=s?1:-1}}var S=Object.assign({position:l},u&&vi),I=c===!0?wi({x:d,y:w}):{x:d,y:w};if(d=I.x,w=I.y,s){var D;return Object.assign({},S,(D={},D[p]=k?"0":"",D[L]=x?"0":"",D.transform=(E.devicePixelRatio||1)<=1?"translate("+d+"px, "+w+"px)":"translate3d("+d+"px, "+w+"px, 0)",D))}return Object.assign({},S,(t={},t[p]=k?w+"px":"",t[L]=x?d+"px":"",t.transform="",t))}function bi(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,l=n.roundOffsets,s=l===void 0?!0:l;if(!1)var u;var c={placement:U(t.placement),variation:ne(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,_n(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:s})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,_n(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:s})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Un={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bi,data:{}};var _t={passive:!0};function yi(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,l=a===void 0?!0:a,s=A(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach(function(c){c.addEventListener("scroll",n.update,_t)}),l&&s.addEventListener("resize",n.update,_t),function(){o&&u.forEach(function(c){c.removeEventListener("scroll",n.update,_t)}),l&&s.removeEventListener("resize",n.update,_t)}}var $n={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yi,data:{}};var Pi={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(e){return e.replace(/left|right|bottom|top/g,function(t){return Pi[t]})}var xi={start:"end",end:"start"};function Ut(e){return e.replace(/start|end/g,function(t){return xi[t]})}function Ue(e){var t=A(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function $e(e){return te(q(e)).left+Ue(e).scrollLeft}function ln(e,t){var n=A(e),r=q(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,l=0,s=0;if(i){o=i.width,a=i.height;var u=gt();(u||!u&&t==="fixed")&&(l=i.offsetLeft,s=i.offsetTop)}return{width:o,height:a,x:l+$e(e),y:s}}function pn(e){var t,n=q(e),r=Ue(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=se(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=se(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+$e(e),s=-r.scrollTop;return K(i||n).direction==="rtl"&&(l+=se(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:l,y:s}}function qe(e){var t=K(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function $t(e){return["html","body","#document"].indexOf(_(e))>=0?e.ownerDocument.body:j(e)&&qe(e)?e:$t(Ce(e))}function Le(e,t){var n;t===void 0&&(t=[]);var r=$t(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=A(r),a=i?[o].concat(o.visualViewport||[],qe(r)?r:[]):r,l=t.concat(a);return i?l:l.concat(Le(Ce(a)))}function nt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ei(e,t){var n=te(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function qn(e,t,n){return t===Bt?nt(ln(e,n)):ee(t)?Ei(t,n):nt(pn(q(e)))}function Ci(e){var t=Le(Ce(e)),n=["absolute","fixed"].indexOf(K(e).position)>=0,r=n&&j(e)?le(e):e;return ee(r)?t.filter(function(i){return ee(i)&&ht(i,r)&&_(i)!=="body"}):[]}function cn(e,t,n,r){var i=t==="clippingParents"?Ci(e):[].concat(t),o=[].concat(i,[n]),a=o[0],l=o.reduce(function(s,u){var c=qn(e,u,r);return s.top=se(c.top,s.top),s.right=We(c.right,s.right),s.bottom=We(c.bottom,s.bottom),s.left=se(c.left,s.left),s},qn(e,a,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function yt(e){var t=e.reference,n=e.element,r=e.placement,i=r?U(r):null,o=r?ne(r):null,a=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,s;switch(i){case R:s={x:a,y:t.y-n.height};break;case B:s={x:a,y:t.y+t.height};break;case V:s={x:t.x+t.width,y:l};break;case H:s={x:t.x-n.width,y:l};break;default:s={x:t.x,y:t.y}}var u=i?je(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(o){case xe:s[u]=s[u]-(t[c]/2-n[c]/2);break;case Ve:s[u]=s[u]+(t[c]/2-n[c]/2);break;default:}}return s}function pe(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,a=o===void 0?e.strategy:o,l=n.boundary,s=l===void 0?Fn:l,u=n.rootBoundary,c=u===void 0?Bt:u,m=n.elementContext,g=m===void 0?Qe:m,d=n.altBoundary,b=d===void 0?!1:d,w=n.padding,y=w===void 0?0:w,x=wt(typeof y!="number"?y:bt(y,Ie)),k=g===Qe?Hn:Qe,L=e.rects.popper,p=e.elements[b?k:g],E=cn(ee(p)?p:p.contextElement||q(e.elements.popper),s,c,a),h=te(e.elements.reference),O=yt({reference:h,element:L,strategy:"absolute",placement:i}),N=nt(Object.assign({},L,O)),F=g===Qe?N:h,M={top:E.top-F.top+x.top,bottom:F.bottom-E.bottom+x.bottom,left:E.left-F.left+x.left,right:F.right-E.right+x.right},S=e.modifiersData.offset;if(g===Qe&&S){var I=S[i];Object.keys(M).forEach(function(D){var z=[V,B].indexOf(D)>=0?1:-1,J=[R,B].indexOf(D)>=0?"y":"x";M[D]+=I[J]*z})}return M}function fn(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,l=n.flipVariations,s=n.allowedAutoPlacements,u=s===void 0?jt:s,c=ne(r),m=c?l?an:an.filter(function(b){return ne(b)===c}):Ie,g=m.filter(function(b){return u.indexOf(b)>=0});g.length===0&&(g=m);var d=g.reduce(function(b,w){return b[w]=pe(e,{placement:w,boundary:i,rootBoundary:o,padding:a})[U(w)],b},{});return Object.keys(d).sort(function(b,w){return d[b]-d[w]})}function Ti(e){if(U(e)===Wt)return[];var t=tt(e);return[Ut(e),t,Ut(t)]}function ki(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,l=a===void 0?!0:a,s=n.fallbackPlacements,u=n.padding,c=n.boundary,m=n.rootBoundary,g=n.altBoundary,d=n.flipVariations,b=d===void 0?!0:d,w=n.allowedAutoPlacements,y=t.options.placement,x=U(y),k=x===y,L=s||(k||!b?[tt(y)]:Ti(y)),p=[y].concat(L).reduce(function(we,ae){return we.concat(U(ae)===Wt?fn(t,{placement:ae,boundary:c,rootBoundary:m,padding:u,flipVariations:b,allowedAutoPlacements:w}):ae)},[]),E=t.rects.reference,h=t.rects.popper,O=new Map,N=!0,F=p[0],M=0;M<p.length;M++){var S=p[M],I=U(S),D=ne(S)===xe,z=[R,B].indexOf(I)>=0,J=z?"width":"height",G=pe(t,{placement:S,boundary:c,rootBoundary:m,altBoundary:g,padding:u}),Y=z?D?V:H:D?B:R;E[J]>h[J]&&(Y=tt(Y));var $=tt(Y),fe=[];if(o&&fe.push(G[I]<=0),l&&fe.push(G[Y]<=0,G[$]<=0),fe.every(function(we){return we})){F=S,N=!1;break}O.set(S,fe)}if(N)for(var ue=b?3:1,Ae=function(ae){var be=p.find(function(Ye){var ye=O.get(Ye);if(ye)return ye.slice(0,ae).every(function(Xe){return Xe})});if(be)return F=be,"break"},de=ue;de>0;de--){var Me=Ae(de);if(Me==="break")break}t.placement!==F&&(t.modifiersData[r]._skip=!0,t.placement=F,t.reset=!0)}}var Gn={name:"flip",enabled:!0,phase:"main",fn:ki,requiresIfExists:["offset"],data:{_skip:!1}};function Yn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Xn(e){return[R,V,B,H].some(function(t){return e[t]>=0})}function Si(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=pe(t,{elementContext:"reference"}),l=pe(t,{altBoundary:!0}),s=Yn(a,r),u=Yn(l,i,o),c=Xn(s),m=Xn(u);t.modifiersData[n]={referenceClippingOffsets:s,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":m})}var Kn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Si};function Oi(e,t,n){var r=U(e),i=[H,R].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],l=o[1];return a=a||0,l=(l||0)*i,[H,V].indexOf(r)>=0?{x:l,y:a}:{x:a,y:l}}function Ii(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,a=jt.reduce(function(c,m){return c[m]=Oi(m,t.rects,o),c},{}),l=a[t.placement],s=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=s,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}var zn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ii};function Li(e){var t=e.state,n=e.name;t.modifiersData[n]=yt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Jn={name:"popperOffsets",enabled:!0,phase:"read",fn:Li,data:{}};function un(e){return e==="x"?"y":"x"}function Di(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,l=a===void 0?!1:a,s=n.boundary,u=n.rootBoundary,c=n.altBoundary,m=n.padding,g=n.tether,d=g===void 0?!0:g,b=n.tetherOffset,w=b===void 0?0:b,y=pe(t,{boundary:s,rootBoundary:u,padding:m,altBoundary:c}),x=U(t.placement),k=ne(t.placement),L=!k,p=je(x),E=un(p),h=t.modifiersData.popperOffsets,O=t.rects.reference,N=t.rects.popper,F=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,M=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(!!h){if(o){var D,z=p==="y"?R:H,J=p==="y"?B:V,G=p==="y"?"height":"width",Y=h[p],$=Y+y[z],fe=Y-y[J],ue=d?-N[G]/2:0,Ae=k===xe?O[G]:N[G],de=k===xe?-N[G]:-O[G],Me=t.elements.arrow,we=d&&Me?Be(Me):{width:0,height:0},ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:vt(),be=ae[z],Ye=ae[J],ye=_e(0,O[G],we[G]),Xe=L?O[G]/2-ue-ye-be-M.mainAxis:Ae-ye-be-M.mainAxis,Se=L?-O[G]/2+ue+ye+Ye+M.mainAxis:de+ye+Ye+M.mainAxis,Ke=t.elements.arrow&&le(t.elements.arrow),kt=Ke?p==="y"?Ke.clientTop||0:Ke.clientLeft||0:0,st=(D=S==null?void 0:S[p])!=null?D:0,St=Y+Xe-st-kt,Ot=Y+Se-st,lt=_e(d?We($,St):$,Y,d?se(fe,Ot):fe);h[p]=lt,I[p]=lt-Y}if(l){var pt,It=p==="x"?R:H,Lt=p==="x"?B:V,Pe=h[E],Oe=E==="y"?"height":"width",ct=Pe+y[It],Re=Pe-y[Lt],ft=[R,H].indexOf(x)!==-1,Dt=(pt=S==null?void 0:S[E])!=null?pt:0,At=ft?ct:Pe-O[Oe]-N[Oe]-Dt+M.altAxis,Mt=ft?Pe+O[Oe]+N[Oe]-Dt-M.altAxis:Re,Rt=d&&ft?Bn(At,Pe,Mt):_e(d?At:ct,Pe,d?Mt:Re);h[E]=Rt,I[E]=Rt-Pe}t.modifiersData[r]=I}}var Qn={name:"preventOverflow",enabled:!0,phase:"main",fn:Di,requiresIfExists:["offset"]};function dn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function mn(e){return e===A(e)||!j(e)?Ue(e):dn(e)}function Ai(e){var t=e.getBoundingClientRect(),n=Ee(t.width)/e.offsetWidth||1,r=Ee(t.height)/e.offsetHeight||1;return n!==1||r!==1}function gn(e,t,n){n===void 0&&(n=!1);var r=j(t),i=j(t)&&Ai(t),o=q(t),a=te(e,i,n),l={scrollLeft:0,scrollTop:0},s={x:0,y:0};return(r||!r&&!n)&&((_(t)!=="body"||qe(o))&&(l=mn(t)),j(t)?(s=te(t,!0),s.x+=t.clientLeft,s.y+=t.clientTop):o&&(s.x=$e(o))),{x:a.left+l.scrollLeft-s.x,y:a.top+l.scrollTop-s.y,width:a.width,height:a.height}}function Mi(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(l){if(!n.has(l)){var s=t.get(l);s&&i(s)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function hn(e){var t=Mi(e);return Vn.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function vn(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function wn(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Zn={placement:"bottom",modifiers:[],strategy:"absolute"};function er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function tr(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?Zn:i;return function(l,s,u){u===void 0&&(u=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zn,o),modifiersData:{},elements:{reference:l,popper:s},attributes:{},styles:{}},m=[],g=!1,d={state:c,setOptions:function(x){var k=typeof x=="function"?x(c.options):x;w(),c.options=Object.assign({},o,c.options,k),c.scrollParents={reference:ee(l)?Le(l):l.contextElement?Le(l.contextElement):[],popper:Le(s)};var L=hn(wn([].concat(r,c.options.modifiers)));if(c.orderedModifiers=L.filter(function(S){return S.enabled}),!1){var p;if(getBasePlacement(c.options.placement)===auto)var E;var h,O,N,F,M}return b(),d.update()},forceUpdate:function(){if(!g){var x=c.elements,k=x.reference,L=x.popper;if(!!er(k,L)){c.rects={reference:gn(k,le(L),c.options.strategy==="fixed"),popper:Be(L)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(S){return c.modifiersData[S.name]=Object.assign({},S.data)});for(var p=0,E=0;E<c.orderedModifiers.length;E++){if(c.reset===!0){c.reset=!1,E=-1;continue}var h=c.orderedModifiers[E],O=h.fn,N=h.options,F=N===void 0?{}:N,M=h.name;typeof O=="function"&&(c=O({state:c,options:F,name:M,instance:d})||c)}}}},update:vn(function(){return new Promise(function(y){d.forceUpdate(),y(c)})}),destroy:function(){w(),g=!0}};if(!er(l,s))return d;d.setOptions(u).then(function(y){!g&&u.onFirstUpdate&&u.onFirstUpdate(y)});function b(){c.orderedModifiers.forEach(function(y){var x=y.name,k=y.options,L=k===void 0?{}:k,p=y.effect;if(typeof p=="function"){var E=p({state:c,name:x,instance:d,options:L}),h=function(){};m.push(E||h)}})}function w(){m.forEach(function(y){return y()}),m=[]}return d}}var Ri=[$n,Jn,Un,mt,zn,Gn,Qn,jn,Kn],bn=tr({defaultModifiers:Ri});var Ni="tippy-box",fr="tippy-content",Fi="tippy-backdrop",ur="tippy-arrow",dr="tippy-svg-arrow",Ge={passive:!0,capture:!0},mr=function(){return document.body};function yn(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function Tn(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function gr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function nr(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function Hi(e){return e.split(/\s+/).filter(Boolean)}function rt(e){return[].concat(e)}function rr(e,t){e.indexOf(t)===-1&&e.push(t)}function Vi(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function Wi(e){return e.split("-")[0]}function Yt(e){return[].slice.call(e)}function ir(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Pt(){return document.createElement("div")}function Xt(e){return["Element","Fragment"].some(function(t){return Tn(e,t)})}function Bi(e){return Tn(e,"NodeList")}function ji(e){return Tn(e,"MouseEvent")}function hr(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function _i(e){return Xt(e)?[e]:Bi(e)?Yt(e):Array.isArray(e)?e:Yt(document.querySelectorAll(e))}function Pn(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function or(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Ui(e){var t,n=rt(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function $i(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var o=i.popperRect,a=i.popperState,l=i.props,s=l.interactiveBorder,u=Wi(a.placement),c=a.modifiersData.offset;if(!c)return!0;var m=u==="bottom"?c.top.y:0,g=u==="top"?c.bottom.y:0,d=u==="right"?c.left.x:0,b=u==="left"?c.right.x:0,w=o.top-r+m>s,y=r-o.bottom-g>s,x=o.left-n+d>s,k=n-o.right-b>s;return w||y||x||k})}function xn(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function ar(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var he={isTouch:!1},sr=0;function qi(){he.isTouch||(he.isTouch=!0,window.performance&&document.addEventListener("mousemove",vr))}function vr(){var e=performance.now();e-sr<20&&(he.isTouch=!1,document.removeEventListener("mousemove",vr)),sr=e}function Gi(){var e=document.activeElement;if(hr(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Yi(){document.addEventListener("touchstart",qi,Ge),window.addEventListener("blur",Gi)}var Xi=typeof window!="undefined"&&typeof document!="undefined",Ki=Xi?!!window.msCrypto:!1;var zi={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ji={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},ce=Object.assign({appendTo:mr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},zi,Ji),Qi=Object.keys(ce),Zi=function(t){var n=Object.keys(t);n.forEach(function(r){ce[r]=t[r]})};function wr(e){var t=e.plugins||[],n=t.reduce(function(r,i){var o=i.name,a=i.defaultValue;if(o){var l;r[o]=e[o]!==void 0?e[o]:(l=ce[o])!=null?l:a}return r},{});return Object.assign({},e,n)}function eo(e,t){var n=t?Object.keys(wr(Object.assign({},ce,{plugins:t}))):Qi,r=n.reduce(function(i,o){var a=(e.getAttribute("data-tippy-"+o)||"").trim();if(!a)return i;if(o==="content")i[o]=a;else try{i[o]=JSON.parse(a)}catch(l){i[o]=a}return i},{});return r}function lr(e,t){var n=Object.assign({},t,{content:gr(t.content,[e])},t.ignoreAttributes?{}:eo(e,t.plugins));return n.aria=Object.assign({},ce.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var to=function(){return"innerHTML"};function En(e,t){e[to()]=t}function pr(e){var t=Pt();return e===!0?t.className=ur:(t.className=dr,Xt(e)?t.appendChild(e):En(t,e)),t}function cr(e,t){Xt(t.content)?(En(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?En(e,t.content):e.textContent=t.content)}function Cn(e){var t=e.firstElementChild,n=Yt(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(fr)}),arrow:n.find(function(r){return r.classList.contains(ur)||r.classList.contains(dr)}),backdrop:n.find(function(r){return r.classList.contains(Fi)})}}function br(e){var t=Pt(),n=Pt();n.className=Ni,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Pt();r.className=fr,r.setAttribute("data-state","hidden"),cr(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(o,a){var l=Cn(t),s=l.box,u=l.content,c=l.arrow;a.theme?s.setAttribute("data-theme",a.theme):s.removeAttribute("data-theme"),typeof a.animation=="string"?s.setAttribute("data-animation",a.animation):s.removeAttribute("data-animation"),a.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth=typeof a.maxWidth=="number"?a.maxWidth+"px":a.maxWidth,a.role?s.setAttribute("role",a.role):s.removeAttribute("role"),(o.content!==a.content||o.allowHTML!==a.allowHTML)&&cr(u,e.props),a.arrow?c?o.arrow!==a.arrow&&(s.removeChild(c),s.appendChild(pr(a.arrow))):s.appendChild(pr(a.arrow)):c&&s.removeChild(c)}return{popper:t,onUpdate:i}}br.$$tippy=!0;var no=1,qt=[],Gt=[];function ro(e,t){var n=lr(e,Object.assign({},ce,wr(ir(t)))),r,i,o,a=!1,l=!1,s=!1,u=!1,c,m,g,d=[],b=nr(St,n.interactiveDebounce),w,y=no++,x=null,k=Vi(n.plugins),L={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:y,reference:e,popper:Pt(),popperInstance:x,props:n,state:L,plugins:k,clearDelayTimeouts:At,setProps:Mt,setContent:Rt,show:$r,hide:qr,hideWithInteractivity:Gr,enable:ft,disable:Dt,unmount:Yr,destroy:Xr};if(!n.render)return p;var E=n.render(p),h=E.popper,O=E.onUpdate;h.setAttribute("data-tippy-root",""),h.id="tippy-"+p.id,p.popper=h,e._tippy=p,h._tippy=p;var N=k.map(function(f){return f.fn(p)}),F=e.hasAttribute("aria-expanded");return Ke(),ue(),Y(),$("onCreate",[p]),n.showOnCreate&&ct(),h.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),h.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&z().addEventListener("mousemove",b)}),p;function M(){var f=p.props.touch;return Array.isArray(f)?f:[f,0]}function S(){return M()[0]==="hold"}function I(){var f;return!!((f=p.props.render)!=null&&f.$$tippy)}function D(){return w||e}function z(){var f=D().parentNode;return f?Ui(f):document}function J(){return Cn(h)}function G(f){return p.state.isMounted&&!p.state.isVisible||he.isTouch||c&&c.type==="focus"?0:yn(p.props.delay,f?0:1,ce.delay)}function Y(f){f===void 0&&(f=!1),h.style.pointerEvents=p.props.interactive&&!f?"":"none",h.style.zIndex=""+p.props.zIndex}function $(f,v,P){if(P===void 0&&(P=!0),N.forEach(function(C){C[f]&&C[f].apply(C,v)}),P){var T;(T=p.props)[f].apply(T,v)}}function fe(){var f=p.props.aria;if(!!f.content){var v="aria-"+f.content,P=h.id,T=rt(p.props.triggerTarget||e);T.forEach(function(C){var X=C.getAttribute(v);if(p.state.isVisible)C.setAttribute(v,X?X+" "+P:P);else{var Z=X&&X.replace(P,"").trim();Z?C.setAttribute(v,Z):C.removeAttribute(v)}})}}function ue(){if(!(F||!p.props.aria.expanded)){var f=rt(p.props.triggerTarget||e);f.forEach(function(v){p.props.interactive?v.setAttribute("aria-expanded",p.state.isVisible&&v===D()?"true":"false"):v.removeAttribute("aria-expanded")})}}function Ae(){z().removeEventListener("mousemove",b),qt=qt.filter(function(f){return f!==b})}function de(f){if(!(he.isTouch&&(s||f.type==="mousedown"))){var v=f.composedPath&&f.composedPath()[0]||f.target;if(!(p.props.interactive&&ar(h,v))){if(rt(p.props.triggerTarget||e).some(function(P){return ar(P,v)})){if(he.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[p,f]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),l=!0,setTimeout(function(){l=!1}),p.state.isMounted||be())}}}function Me(){s=!0}function we(){s=!1}function ae(){var f=z();f.addEventListener("mousedown",de,!0),f.addEventListener("touchend",de,Ge),f.addEventListener("touchstart",we,Ge),f.addEventListener("touchmove",Me,Ge)}function be(){var f=z();f.removeEventListener("mousedown",de,!0),f.removeEventListener("touchend",de,Ge),f.removeEventListener("touchstart",we,Ge),f.removeEventListener("touchmove",Me,Ge)}function Ye(f,v){Xe(f,function(){!p.state.isVisible&&h.parentNode&&h.parentNode.contains(h)&&v()})}function ye(f,v){Xe(f,v)}function Xe(f,v){var P=J().box;function T(C){C.target===P&&(xn(P,"remove",T),v())}if(f===0)return v();xn(P,"remove",m),xn(P,"add",T),m=T}function Se(f,v,P){P===void 0&&(P=!1);var T=rt(p.props.triggerTarget||e);T.forEach(function(C){C.addEventListener(f,v,P),d.push({node:C,eventType:f,handler:v,options:P})})}function Ke(){S()&&(Se("touchstart",st,{passive:!0}),Se("touchend",Ot,{passive:!0})),Hi(p.props.trigger).forEach(function(f){if(f!=="manual")switch(Se(f,st),f){case"mouseenter":Se("mouseleave",Ot);break;case"focus":Se(Ki?"focusout":"blur",lt);break;case"focusin":Se("focusout",lt);break}})}function kt(){d.forEach(function(f){var v=f.node,P=f.eventType,T=f.handler,C=f.options;v.removeEventListener(P,T,C)}),d=[]}function st(f){var v,P=!1;if(!(!p.state.isEnabled||pt(f)||l)){var T=((v=c)==null?void 0:v.type)==="focus";c=f,w=f.currentTarget,ue(),!p.state.isVisible&&ji(f)&&qt.forEach(function(C){return C(f)}),f.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||a)&&p.props.hideOnClick!==!1&&p.state.isVisible?P=!0:ct(f),f.type==="click"&&(a=!P),P&&!T&&Re(f)}}function St(f){var v=f.target,P=D().contains(v)||h.contains(v);if(!(f.type==="mousemove"&&P)){var T=Oe().concat(h).map(function(C){var X,Z=C._tippy,ze=(X=Z.popperInstance)==null?void 0:X.state;return ze?{popperRect:C.getBoundingClientRect(),popperState:ze,props:n}:null}).filter(Boolean);$i(T,f)&&(Ae(),Re(f))}}function Ot(f){var v=pt(f)||p.props.trigger.indexOf("click")>=0&&a;if(!v){if(p.props.interactive){p.hideWithInteractivity(f);return}Re(f)}}function lt(f){p.props.trigger.indexOf("focusin")<0&&f.target!==D()||p.props.interactive&&f.relatedTarget&&h.contains(f.relatedTarget)||Re(f)}function pt(f){return he.isTouch?S()!==f.type.indexOf("touch")>=0:!1}function It(){Lt();var f=p.props,v=f.popperOptions,P=f.placement,T=f.offset,C=f.getReferenceClientRect,X=f.moveTransition,Z=I()?Cn(h).arrow:null,ze=C?{getBoundingClientRect:C,contextElement:C.contextElement||D()}:e,Mn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Nt){var Je=Nt.state;if(I()){var Kr=J(),nn=Kr.box;["placement","reference-hidden","escaped"].forEach(function(Ft){Ft==="placement"?nn.setAttribute("data-placement",Je.placement):Je.attributes.popper["data-popper-"+Ft]?nn.setAttribute("data-"+Ft,""):nn.removeAttribute("data-"+Ft)}),Je.attributes.popper={}}}},Ne=[{name:"offset",options:{offset:T}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},Mn];I()&&Z&&Ne.push({name:"arrow",options:{element:Z,padding:3}}),Ne.push.apply(Ne,(v==null?void 0:v.modifiers)||[]),p.popperInstance=bn(ze,h,Object.assign({},v,{placement:P,onFirstUpdate:g,modifiers:Ne}))}function Lt(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function Pe(){var f=p.props.appendTo,v,P=D();p.props.interactive&&f===mr||f==="parent"?v=P.parentNode:v=gr(f,[P]),v.contains(h)||v.appendChild(h),p.state.isMounted=!0,It()}function Oe(){return Yt(h.querySelectorAll("[data-tippy-root]"))}function ct(f){p.clearDelayTimeouts(),f&&$("onTrigger",[p,f]),ae();var v=G(!0),P=M(),T=P[0],C=P[1];he.isTouch&&T==="hold"&&C&&(v=C),v?r=setTimeout(function(){p.show()},v):p.show()}function Re(f){if(p.clearDelayTimeouts(),$("onUntrigger",[p,f]),!p.state.isVisible){be();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(f.type)>=0&&a)){var v=G(!1);v?i=setTimeout(function(){p.state.isVisible&&p.hide()},v):o=requestAnimationFrame(function(){p.hide()})}}function ft(){p.state.isEnabled=!0}function Dt(){p.hide(),p.state.isEnabled=!1}function At(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Mt(f){if(!p.state.isDestroyed){$("onBeforeUpdate",[p,f]),kt();var v=p.props,P=lr(e,Object.assign({},v,ir(f),{ignoreAttributes:!0}));p.props=P,Ke(),v.interactiveDebounce!==P.interactiveDebounce&&(Ae(),b=nr(St,P.interactiveDebounce)),v.triggerTarget&&!P.triggerTarget?rt(v.triggerTarget).forEach(function(T){T.removeAttribute("aria-expanded")}):P.triggerTarget&&e.removeAttribute("aria-expanded"),ue(),Y(),O&&O(v,P),p.popperInstance&&(It(),Oe().forEach(function(T){requestAnimationFrame(T._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[p,f])}}function Rt(f){p.setProps({content:f})}function $r(){var f=p.state.isVisible,v=p.state.isDestroyed,P=!p.state.isEnabled,T=he.isTouch&&!p.props.touch,C=yn(p.props.duration,0,ce.duration);if(!(f||v||P||T)&&!D().hasAttribute("disabled")&&($("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,I()&&(h.style.visibility="visible"),Y(),ae(),p.state.isMounted||(h.style.transition="none"),I()){var X=J(),Z=X.box,ze=X.content;Pn([Z,ze],0)}g=function(){var Ne;if(!(!p.state.isVisible||u)){if(u=!0,h.offsetHeight,h.style.transition=p.props.moveTransition,I()&&p.props.animation){var tn=J(),Nt=tn.box,Je=tn.content;Pn([Nt,Je],C),or([Nt,Je],"visible")}fe(),ue(),rr(Gt,p),(Ne=p.popperInstance)==null||Ne.forceUpdate(),$("onMount",[p]),p.props.animation&&I()&&ye(C,function(){p.state.isShown=!0,$("onShown",[p])})}},Pe()}}function qr(){var f=!p.state.isVisible,v=p.state.isDestroyed,P=!p.state.isEnabled,T=yn(p.props.duration,1,ce.duration);if(!(f||v||P)&&($("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,u=!1,a=!1,I()&&(h.style.visibility="hidden"),Ae(),be(),Y(!0),I()){var C=J(),X=C.box,Z=C.content;p.props.animation&&(Pn([X,Z],T),or([X,Z],"hidden"))}fe(),ue(),p.props.animation?I()&&Ye(T,p.unmount):p.unmount()}}function Gr(f){z().addEventListener("mousemove",b),rr(qt,b),b(f)}function Yr(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Lt(),Oe().forEach(function(f){f._tippy.unmount()}),h.parentNode&&h.parentNode.removeChild(h),Gt=Gt.filter(function(f){return f!==p}),p.state.isMounted=!1,$("onHidden",[p]))}function Xr(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),kt(),delete e._tippy,p.state.isDestroyed=!0,$("onDestroy",[p]))}}function xt(e,t){t===void 0&&(t={});var n=ce.plugins.concat(t.plugins||[]);Yi();var r=Object.assign({},t,{plugins:n}),i=_i(e);if(!1)var o,a;var l=i.reduce(function(s,u){var c=u&&ro(u,r);return c&&s.push(c),s},[]);return Xt(e)?l[0]:l}xt.defaultProps=ce;xt.setDefaultProps=Zi;xt.currentInput=he;var yr=function(t){var n=t===void 0?{}:t,r=n.exclude,i=n.duration;Gt.forEach(function(o){var a=!1;if(r&&(a=hr(r)?o.reference===r:o.popper===r.popper),!a){var l=o.props.duration;o.setProps({duration:i}),o.hide(),o.state.isDestroyed||o.setProps({duration:l})}})},vp=Object.assign({},mt,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});xt.setDefaultProps({render:br});var Kt=xt;var Sr=require("obsidian");var kr=require("obsidian");var Pr=require("obsidian"),zt;function xr(e){zt=e}var Er=async e=>{let t=createDiv();t.addClass("snw-ref-item-info"),t.addClass("search-result-file-match"),t.setAttribute("snw-data-line-number",e.reference.position.start.line.toString()),t.setAttribute("snw-data-file-name",e.sourceFile.path.replace(".md","")),t.setAttribute("data-href",e.sourceFile.path.replace(".md",""));let n=await io(e.sourceFile,e.reference.position);return t.appendChild(n),t},io=async(e,t)=>{let n=await zt.app.vault.cachedRead(e),r=zt.app.metadataCache.getFileCache(e),i=0,o=0;for(let s=0;s<r.sections.length;s++){let u=r.sections[s];if(u.position.start.offset<=t.start.offset&&u.position.end.offset>=t.end.offset){i=u.position.start.offset,o=u.position.end.offset;break}}let a=n.substring(i,o),l=createDiv();return l.setAttribute("uic","uic"),await Pr.MarkdownRenderer.renderMarkdown(a,l,e.path,zt),l};var Cr=require("obsidian"),Tr=async(e,t,n,r,i,o,a)=>{let l=createDiv();l.addClass(o?"snw-ref-title-popover":"snw-ref-title-side-pane"),l.addClass("tree-item-self"),l.addClass("is-clickable"),l.setAttribute("snw-ref-title-type",e),l.setAttribute("snw-ref-title-key",t),l.setAttribute("snw-data-file-name",n),l.setAttribute("snw-data-line-number",i.toString());let s=createDiv({cls:"snw-ref-title-popover-label"});if(s.innerText=t,l.append(s),o){let u=createSpan();u.addClass("snw-ref-title-popover-icon"),(0,Cr.setIcon)(u,"more-horizontal");let c=createSpan();c.appendChild(u),c.addClass("snw-ref-title-popover-open-sidepane-icon"),c.setAttribute("snw-ref-title-type",e),c.setAttribute("snw-ref-title-key",t),c.setAttribute("snw-data-file-name",n),c.setAttribute("snw-data-line-number",i.toString()),l.appendChild(c),setTimeout(async()=>{c&&(c.onclick=async m=>{m.stopPropagation(),yr({duration:0});let g=m.target.closest(".snw-ref-title-popover-open-sidepane-icon"),d=g.getAttribute("snw-ref-title-type"),b=g.getAttribute("snw-ref-title-key"),w=g.getAttribute("snw-data-file-name"),y=g.getAttribute("snw-data-line-number");a.activateView(d,b,w,Number(y))})},300)}return l};var kn=async(e,t,n,r,i,o)=>{let a=await oo(e,t,n),l=createDiv();l.append(await Tr(e,t,n,a.refCount,r,i,o));let s=createDiv({cls:"snw-ref-area"});return s.append(a.response),l.append(s),l},oo=async(e,t,n)=>{let r=0,i=null;if(e==="File"){let s=Ht().filter(u=>(u==null?void 0:u.resolvedFile.path)===n);r=s.length,i=s}else{let l=dt()[t];l===void 0&&(l=dt()[n+"#^"+t]);let s=await ao(l);r=s.length,i=s}let o=Array.from(new Set(i.map(l=>l.sourceFile.path))).map(l=>i.find(s=>s.sourceFile.path===l)),a=createDiv();for(let l of o){let s=createDiv();s.addClass("snw-ref-item-container"),s.addClass("tree-item"),a.appendChild(s);let u=createDiv();u.addClass("snw-ref-item-file"),u.addClass("tree-item-self"),u.addClass("search-result-file-title"),u.addClass("is-clickable"),u.setAttribute("snw-data-line-number","-1"),u.setAttribute("snw-data-file-name",l.sourceFile.path.replace(".md","")),u.setAttribute("data-href",l.sourceFile.path),u.setAttribute("href",l.sourceFile.path);let c=createDiv();c.addClass("snw-ref-item-file-icon"),c.addClass("tree-item-icon"),c.addClass("collapse-icon"),(0,kr.setIcon)(c,"file-box");let m=createDiv();m.addClass("snw-ref-item-file-label"),m.addClass("tree-item-inner"),m.innerText=l.sourceFile.basename,u.append(c),u.append(m),s.appendChild(u);let g=createDiv();g.addClass("snw-ref-item-collection-items"),g.addClass("search-result-file-matches"),s.appendChild(g);for(let d of i)l.sourceFile.path===d.sourceFile.path&&g.appendChild(await Er(d))}return{response:a,refCount:r}},ao=async e=>e.sort((t,n)=>t.sourceFile.basename.localeCompare(n.sourceFile.basename)||Number(t.reference.position.start.line)-Number(n.reference.position.start.line));var re=null;function Or(e){re=e,xr(e)}var Jt=async e=>{let{refType:t,key:n,filePath:r,lineNu:i}=await so(e),o=createDiv();o.addClass("snw-popover-container"),o.addClass("search-result-container"),o.appendChild(await kn(t,n,r,i,!0,re)),e.setContent(o),setTimeout(async()=>{await Lr(!1,o)},500)},Ir=async(e,t,n,r)=>{let i=createDiv();return i.addClass("snw-sidepane-container"),i.addClass("search-result-container"),i.append(await kn(e,t,n,r,!1,re)),setTimeout(async()=>{await Lr(!1,i)},500),i},Lr=async(e,t)=>{t.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var c,m;i.preventDefault();let o=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover"),a=Number(o.getAttribute("snw-data-line-number")),l=o.getAttribute("snw-data-file-name"),s=app.metadataCache.getFirstLinkpathDest(l,l);(i.ctrlKey||i.metaKey)&&i.altKey?re.app.workspace.getLeaf("split","vertical").openFile(s):(i.ctrlKey||i.metaKey)&&i.shiftKey?re.app.workspace.getLeaf("split","horizontal").openFile(s):i.ctrlKey||i.metaKey?re.app.workspace.getLeaf("tab").openFile(s):i.altKey?re.app.workspace.getLeaf("window").openFile(s):re.app.workspace.getLeaf(!1).openFile(s);let u=o.getAttribute("snw-ref-title-key");if(u){if(u.contains("#^")){let g=Object.entries((c=re.app.metadataCache.getFileCache(s))==null?void 0:c.blocks);if(g){let d=u.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();a=g.find(w=>w[0]===d)[1].position.start.line}}else if(u.contains("#")){let g=(m=re.app.metadataCache.getFileCache(s))==null?void 0:m.headings;if(g){let d=u.match(/#(.+)/g)[0].replace("#","");a=g.find(w=>w.heading===d).position.start.line}}}a>0&&setTimeout(()=>{re.app.workspace.getActiveViewOfType(Sr.MarkdownView).setEphemeralState({line:a})},400)}),re.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let o=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!=!1;if(o===!1||o===!0&&(i.ctrlKey||i.metaKey)){let a=i.target,l={scroll:Number(a.getAttribute("snw-data-line-number"))},s=a.getAttribute("snw-data-file-name");s&&app.workspace.trigger("link-hover",{},a,s,"",l)}}))})},so=async e=>{let t=e.reference,n=t.getAttribute("data-snw-type"),r=t.getAttribute("data-snw-key"),i=t.getAttribute("data-snw-filepath"),o=Number(t.getAttribute("snw-data-line-number"));return{refType:n,key:r,filePath:i,lineNu:o}};var Sn=require("obsidian"),Q;function Dr(e){Q=e}function Te(e,t,n,r,i,o){var l,s;(l=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&l.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.htmlDecorationForReferencesElement(count, referenceType, key, filePath)",Q,e,t,n,r);let a=createDiv({cls:"snw-reference snw-"+t});return a.innerText=e.toString(),a.setAttribute("data-snw-type",t),a.setAttribute("data-snw-key",n),a.setAttribute("data-snw-filepath",r),a.setAttribute("snw-data-line-number",o.toString()),i&&a.addClass(i),(Sn.Platform.isDesktop||Sn.Platform.isDesktopApp)&&(a.onclick=async u=>Qt(u.target)),(s=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&s.HtmlDecorationElements&&Q.snwAPI.console("returned element",a),Kt(a,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onShow(u){setTimeout(async()=>{await Jt(u)},1)}}),a}var Qt=async e=>{var o;let t=e.getAttribute("data-snw-type"),n=e.getAttribute("data-snw-key"),r=e.getAttribute("data-snw-filepath"),i=e.getAttribute("snw-data-line-number");(o=Q.snwAPI.enableDebugging)!=null&&o.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.processHtmlDecorationReferenceEvent: target, key, refType, filePath",e,n,t,r),Q.activateView(t,n,r,Number(i))};var it;function Mr(e){it=e}var Rr=ke.ViewPlugin.fromClass(class{constructor(e){this.view=e;this.decorations=ke.Decoration.none;this.regxPattern="";it.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),it.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"!\\[\\[(.*?)\\]\\]"),it.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"\\[\\[(.*?)\\]\\]"),it.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"^#+\\s.+"),this.regxPattern!==""&&(this.decorator=new ke.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(t,n,r,i,o)=>{var u,c,m,g,d,b;let a=o.state.field(Ar.editorInfoField),l=i[0].charAt(0),s=ge(a.file);if(((c=(u=s==null?void 0:s.cacheMetaData)==null?void 0:u.frontmatter)==null?void 0:c["snw-file-exclude"])!=!0){let w=[];if(l===" "&&((m=s==null?void 0:s.blocks)==null?void 0:m.length)>0)w.push({key:a.file.path.replace(".md","")+i[0].replace(" ^","#^"),transformedCachedItem:s.blocks,refType:"block",from:r,to:r});else if(l==="!"&&((g=s==null?void 0:s.embeds)==null?void 0:g.length)>0)w.push({key:i[0].replace("![[","").replace("]]",""),transformedCachedItem:s.embeds,refType:"embed",from:r,to:r});else if(l==="["&&((d=s==null?void 0:s.links)==null?void 0:d.length)>0)w.push({key:i[0].replace("[[","").replace("]]",""),transformedCachedItem:s.links,refType:"link",from:r,to:r});else if(l==="#"&&((b=s==null?void 0:s.headings)==null?void 0:b.length)>0){w.push({key:i[0].replace(/^#+/,"").substring(1),transformedCachedItem:s.headings,refType:"heading",from:r,to:r});let y=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(y)for(let x of y)w.push({key:x.replace("![[","").replace("[[","").replace("]]",""),transformedCachedItem:x.startsWith("!")?s.embeds:s.links,refType:"link",from:r-i[0].length+(i[0].indexOf(x)+x.length),to:r-i[0].length+(i[0].indexOf(x)+x.length)})}for(let y of w.sort((x,k)=>x.to-k.to))if(y.key!=""){let x=lo(y.refType,y.key,y.transformedCachedItem,a.file.path);x!=null&&t(y.from,y.to,ke.Decoration.widget({widget:x,side:1}))}}}}),this.regxPattern!=""&&(this.decorations=this.decorator.createDeco(e)))}update(e){this.regxPattern!=""&&(e.docChanged||e.viewportChanged)&&(this.decorations=this.decorator.updateDeco(e,this.decorations))}},{decorations:e=>e.decorations}),lo=(e,t,n,r)=>{var i;(e==="embed"||e==="link")&&t.contains("|")&&(t=t.substring(0,t.search(/\|/)));for(let o=0;o<n.length;o++){let a=n[o],l=a.key;if(e==="heading"&&(l=a.headerMatch,t=t.replace(/^\s+|\s+$/g,"")),l===t)return((i=a==null?void 0:a.references[0])==null?void 0:i.excludedFile)!=!0&&(a==null?void 0:a.references.length)>=it.settings.minimumRefCountThreshold?new On(a.references.length,a.type,a.key,a.references[0].resolvedFile.path.replace(".md",""),null,a.pos.start.line):null}},On=class extends ke.WidgetType{constructor(n,r,i,o,a,l){super();this.referenceCount=n,this.referenceType=r,this.key=i,this.filePath=o,this.addCssClass=a,this.lineNu=l}toDOM(){return Te(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var Nr=require("obsidian");var ie;function Fr(e){ie=e}function Ln(e,t){var i,o;if(ie.snwAPI.enableDebugging.PreviewRendering&&ie.snwAPI.console("markdownPreviewProcessor(HTMLElement, MarkdownPostProcessorContext,ctx.getSectionInfo",e,t,t.getSectionInfo(e)),t.remainingNestLevel===4||((i=t==null?void 0:t.frontmatter)==null?void 0:i["snw-file-exclude"])===!0||e.hasAttribute("uic"))return;let n=ie.app.vault.fileMap[t.sourcePath];if(n===void 0)return;let r=ie.app.metadataCache.getFileCache(n);if(!((o=r==null?void 0:r.frontmatter)!=null&&o["kanban-plugin"]))try{t.addChild(new In(e,t.getSectionInfo(e),n))}catch(a){}}var In=class extends Nr.MarkdownRenderChild{constructor(n,r,i){super(n);this.containerEl=n,this.sectionInfo=r,this.currentFile=i,ie.snwAPI.enableDebugging.PreviewRendering&&ie.snwAPI.console("snwChildComponent(HTMLElement, MarkdownPostProcessorContext,currentfile",n,r,i)}onload(){this.processMarkdown()}processMarkdown(){var i,o,a,l,s,u;let n=ie.settings.minimumRefCountThreshold,r=ge(this.currentFile);if(((o=(i=r==null?void 0:r.cacheMetaData)==null?void 0:i.frontmatter)==null?void 0:o["snw-file-exclude"])!==!0&&((r==null?void 0:r.blocks)||r.embeds||r.headings||r.links)){if(ie.settings.enableRenderingBlockIdInMarkdown&&(r==null?void 0:r.blocks)){let c=!1;try{c=ctx.containerEl.closest(".snw-embed-preview").nextSibling.classList.contains("snw-reference")}catch(m){}for(let m of r.blocks)if(((a=m.references[0])==null?void 0:a.excludedFile)!=!0&&m.references.length>=n&&m.pos.start.line>=((l=this.sectionInfo)==null?void 0:l.lineStart)&&m.pos.end.line<=((s=this.sectionInfo)==null?void 0:s.lineEnd)&&!c){let g=Te(m.references.length,"block",m.key,m.references[0].resolvedFile.path.replace(".md",""),"",m.pos.start.line),d=this.containerEl.querySelector("p");d||(d=this.containerEl.querySelector("li"));try{if(!d.hasClass("snw-block-preview")){g.addClass("snw-block-preview"),d.append(g);break}}catch(b){}}}if(ie.settings.enableRenderingEmbedsInMarkdown&&(r==null?void 0:r.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(c=>{var g;let m=c.getAttribute("src");for(let d of r.embeds)if(((g=d.references[0])==null?void 0:g.excludedFile)!=!0&&d.references.length>=n&&m.endsWith(d.key)){let b=Te(d.references.length,"embed",d.key,d.references[0].resolvedFile.path.replace(".md",""),"",d.pos.start.line);b.addClass("snw-embed-preview"),c.after(b);break}}),ie.settings.enableRenderingHeadersInMarkdown){let c=this.containerEl.querySelector("[data-heading]");if((r==null?void 0:r.headings)&&c){let m=c.getAttribute("data-heading");for(let g of r.headings)if(((u=g.references[0])==null?void 0:u.excludedFile)!=!0&&g.references.length>=n&&g.headerMatch===m){let d=Te(g.references.length,"heading",g.key,g.references[0].resolvedFile.path.replace(".md",""),"",g.pos.start.line);d.addClass("snw-heading-preview"),this.containerEl.querySelector("h1,h2,h3,h4,h5,h6").insertAdjacentElement("beforeend",d);break}}}ie.settings.enableRenderingLinksInMarkdown&&(r==null?void 0:r.links)&&this.containerEl.querySelectorAll("a.internal-link:not(.snw-link-preview)").forEach(c=>{var g;let m=c.getAttribute("data-href");for(let d of r.links)if(((g=d.references[0])==null?void 0:g.excludedFile)!=!0&&d.references.length>=n&&(d.key===m||(d==null?void 0:d.original)!=null&&(d==null?void 0:d.original.contains(m)))){let b=Te(d.references.length,"link",d.key,d.references[0].resolvedFile.path.replace(".md",""),"",d.pos.start.line);b.addClass("snw-link-preview"),c.after(b);break}})}}};var Et=require("@codemirror/view"),Hr=require("obsidian");var ot;function Vr(e){ot=e}var po=class extends Et.GutterMarker{constructor(t,n,r,i,o){super();this.referenceCount=t,this.referenceType=n,this.key=r,this.filePath=i,this.addCssClass=o}toDOM(){return Te(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,0)}},co=new class extends Et.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},fo=(0,Et.gutter)({class:"snw-gutter-ref",lineMarker(e,t){var o,a,l;ot.snwAPI.enableDebugging.GutterEmbedCounter&&ot.snwAPI.console("ReferenceGutterExtension(EditorView, BlockInfo)",e,t);let n=e.state.field(Hr.editorInfoField);if(!n.file)return;let r=ge(n.file);if(((a=(o=r==null?void 0:r.cacheMetaData)==null?void 0:o.frontmatter)==null?void 0:a["snw-file-exclude"])===!0)return;let i=(l=n.app.metadataCache.getFileCache(n.file))==null?void 0:l.embeds;if((i==null?void 0:i.length)>=ot.settings.minimumRefCountThreshold){let s=e.state.doc.lineAt(t.from).number;for(let u of i)if(u.position.start.line+1===s){for(let c of r.embeds)if((c==null?void 0:c.references[0].excludedFile)!=!0&&(c==null?void 0:c.references.length)>0&&(c==null?void 0:c.pos.start.line)+1===s){let m=c.references[0].reference.original;if(m.substring(0,1)!="!"&&(m="!"+m),e.state.doc.lineAt(t.from).text.trim()===m)return ot.snwAPI.enableDebugging.GutterEmbedCounter&&ot.snwAPI.console("ReferenceGutterExtension New gutter",c.references.length,"embed",c.key,c.key,"snw-embed-special"),new po(c.references.length,"embed",c.key,c.references[0].resolvedFile.path.replace(".md",""),"snw-embed-special")}}}},initialSpacer:()=>co}),Wr=fo;var Dn=require("obsidian");var ve;function Br(e){ve=e}function An(){var e;(e=ve.snwAPI.enableDebugging)!=null&&e.LinkCountInHeader&&ve.snwAPI.console("headerImageCount.setHeaderWithReferenceCounts(thePlugin)",at),ve.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&uo(t.view)})}function uo(e){var s,u,c,m,g;(s=ve.snwAPI.enableDebugging)!=null&&s.LinkCountInHeader&&ve.snwAPI.console("headerImageCount.processHeader(ThePlugin, MarkdownView)",ve,e);let t=Ht();if(t==null)return;let n=t.filter(d=>(d==null?void 0:d.resolvedFile.path)===e.file.path),r=n.length,i=ge(e.file);if(((c=(u=i==null?void 0:i.cacheMetaData)==null?void 0:u.frontmatter)==null?void 0:c["snw-file-exclude"])===!0&&(r=0),((m=n[0])==null?void 0:m.excludedFile)===!0&&(r=0),r<ve.settings.minimumRefCountThreshold){e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();return}let o=e.contentEl.querySelector(".snw-header-count");if(o&&o.getAttribute("data-snw-key")===e.file.basename){o.innerText=" "+n.length.toString()+" ";return}let a=e.contentEl;e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();let l=a.querySelector(".snw-header-count-wrapper");l?o=a.querySelector(".snw-header-count"):(l=createDiv({cls:"snw-header-count-wrapper"}),o=createDiv({cls:"snw-header-count"}),l.appendChild(o),a.prepend(l)),o.innerText=" "+n.length.toString()+" ",(Dn.Platform.isDesktop||Dn.Platform.isDesktopApp)&&(o.onclick=d=>{d.stopPropagation(),Qt(l)}),l.setAttribute("data-snw-key",e.file.basename),l.setAttribute("data-snw-type","File"),l.setAttribute("data-snw-filepath",e.file.path),l.onclick=d=>{d.stopPropagation(),Qt(d.target)},Kt(l,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onShow(d){setTimeout(async()=>{await Jt(d)},1)}}),(g=ve.snwAPI.enableDebugging)!=null&&g.LinkCountInHeader&&ve.snwAPI.console("snwTitleRefCountDisplayCountEl",o)}var jr=require("obsidian");var De="Strange New Worlds",Zt=class extends jr.ItemView{constructor(n,r){super(n);this.thePlugin=r}getViewType(){return De}getDisplayText(){return De}getIcon(){return"dot-network"}async onOpen(){let n=this.containerEl,r=n.createSpan({cls:"snw-sidepane-loading"}),i=createDiv({cls:"snw-sidepane-loading-banner"});i.innerText="Discovering Strange New Worlds...",r.appendChild(i);let o=createDiv({cls:"snw-sidepane-loading-subtext"});o.innerText="Click a reference counter in the main document for information to appear here.",r.appendChild(o),n.empty(),n.appendChild(r)}async updateView(){let n=this.thePlugin.lastSelectedReferenceType,r=this.thePlugin.lastSelectedReferenceKey,i=this.thePlugin.lastSelectedReferenceFilePath,o=this.thePlugin.lastSelectedLineNumber;this.thePlugin.snwAPI.enableDebugging.SidePane&&(this.thePlugin.snwAPI.console("sidepane.open() refType, key, filePath",n,r,i),this.thePlugin.snwAPI.console("sidepane.open() getReferencesCache()",dt())),this.containerEl.replaceChildren(await Ir(n,r,i,o))}async onClose(){}};var W=require("obsidian"),_r={enableOnStartupDesktop:!0,enableOnStartupMobile:!0,minimumRefCountThreshold:1,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayEmbedReferencesInGutter:!0,displayEmbedReferencesInGutterMobile:!1,cacheUpdateInMilliseconds:500,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0},en=class extends W.PluginSettingTab{constructor(n,r){super(n,r);this.thePlugin=r}display(){let{containerEl:n}=this;n.empty(),n.createEl("h2",{text:this.thePlugin.appName}),n.createEl("h2",{text:"Enable on startup"}),new W.Setting(n).setName("Enable upon startup (Desktop)").setDesc("If disabled, SNW will not show block counters from startup until enabled from the command palette.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableOnStartupDesktop),r.onChange(async i=>{this.thePlugin.settings.enableOnStartupDesktop=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Enable startup (Mobile)").setDesc("If disabled, SNW will not show block counters from startup until enabled from the command palette.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableOnStartupMobile),r.onChange(async i=>{this.thePlugin.settings.enableOnStartupMobile=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"View Modes"}),new W.Setting(n).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayIncomingFilesheader),r.onChange(async i=>{this.thePlugin.settings.displayIncomingFilesheader=i,this.thePlugin.toggleStateHeaderCount(),await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Show SNW indicators in Live Preview Editor").setDesc("While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesLivePreview),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesLivePreview=i,this.thePlugin.toggleStateSNWLivePreview(),await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Show SNW indicators in Reading view ").setDesc("While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesMarkdown),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesMarkdown=i,this.thePlugin.toggleStateSNWMarkdownPreview(),await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Embed references in Gutter in Live Preview Mode (Desktop)").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when  
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is 
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(r=>{r.setValue(this.thePlugin.settings.displayEmbedReferencesInGutter),r.onChange(async i=>{this.thePlugin.settings.displayEmbedReferencesInGutter=i,this.thePlugin.toggleStateSNWGutters(),await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Embed references in Gutter in Live Preview Mode (Mobile)").setDesc("This is off by default on mobile since the gutter takes up some space in the left margin.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayEmbedReferencesInGutterMobile),r.onChange(async i=>{this.thePlugin.settings.displayEmbedReferencesInGutterMobile=i,this.thePlugin.toggleStateSNWGutters(),await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Reading mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new W.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInMarkdown=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInMarkdown=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInMarkdown=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInMarkdown=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Live Preview Mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new W.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInLivePreview=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInLivePreview=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInLivePreview=i,await this.thePlugin.saveSettings()})}),new W.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInLivePreview=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Other Settings"}),new W.Setting(n).setName("Minimal file count threshold").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. Default is one reference.
					 Currently set to: ${this.thePlugin.settings.minimumRefCountThreshold} refernences.`).addSlider(r=>r.setLimits(1,20,1).setValue(this.thePlugin.settings.minimumRefCountThreshold).onChange(async i=>{this.thePlugin.settings.minimumRefCountThreshold=i,await this.thePlugin.saveSettings()}).setDynamicTooltip()),n.createEl("h2",{text:"Cache Tuning"}),new W.Setting(n).setName("How often should the SNW Cache update").setDesc(`By default SNW will updates its internal cache every half a second (500 milliseconds) when there is some change in the vualt.
					  Increase the time to slighlty improve performance on less performant devices or decrease it to improve refresh of vault information.
					  Currently set to: ${this.thePlugin.settings.cacheUpdateInMilliseconds} milliseconds. (Requires Obsidian Restart)`).addSlider(r=>r.setLimits(500,3e4,100).setValue(this.thePlugin.settings.cacheUpdateInMilliseconds).onChange(async i=>{this.thePlugin.settings.cacheUpdateInMilliseconds=i,await this.thePlugin.saveSettings()}).setDynamicTooltip())}};var Ct=class{constructor(t){this.enableDebugging={CM6Extension:!1,PreviewRendering:!1,LinkCountInHeader:!1,GutterEmbedCounter:!1,HtmlDecorationElements:!1,SidePane:!1};this.console=(t,...n)=>{console.log("SNW: "+t,n)};this.getMetaInfoByCurrentFile=async()=>this.getMetaInfoByFileName(app.workspace.getActiveFile().path);this.getMetaInfoByFileName=async t=>{let n=app.metadataCache.getFirstLinkpathDest(t,"/");return{TFile:n,metadataCache:app.metadataCache.getFileCache(n),SnwTransformedCache:ge(n)}};this.plugin=t}};var Ur=require("obsidian"),Tt=class{constructor(t){this.snwCommands=[{id:"SNW-ToggleActiveState",icon:"dot-network",name:"Toggle active state of SNW plugin on/off",showInRibbon:!0,callback:async()=>{this.thePlugin.snwPluginActivelyShowingCounts=!this.thePlugin.snwPluginActivelyShowingCounts;let t="SNW toggled "+(this.thePlugin.snwPluginActivelyShowingCounts?`ON

`:`OFF

`);t+="Tabs may require reloading for this change to take effect.",new Ur.Notice(t),this.thePlugin.toggleStateHeaderCount(),this.thePlugin.toggleStateSNWMarkdownPreview(),this.thePlugin.toggleStateSNWLivePreview(),this.thePlugin.toggleStateSNWGutters()}}];this.thePlugin=t,this.snwCommands.forEach(async n=>{this.thePlugin.addCommand({id:n.id,name:n.name,icon:n.icon,callback:async()=>{await n.callback()}})})}};var at=class extends oe.Plugin{constructor(){super(...arguments);this.appName=this.manifest.name;this.appID=this.manifest.id;this.markdownPostProcessorSNW=null;this.editorExtensions=[]}async onload(){console.log("loading "+this.appName),Nn(this),Dr(this),Vr(this),Br(this),Fr(this),Mr(this),Or(this),this.snwAPI=new Ct(this),globalThis.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new en(this.app,this)),oe.Platform.isMobile||oe.Platform.isMobileApp?this.snwPluginActivelyShowingCounts=this.settings.enableOnStartupMobile:this.snwPluginActivelyShowingCounts=this.settings.enableOnStartupDesktop,this.commands=new Tt(this),this.registerView(De,r=>new Zt(r,this));let n=(0,oe.debounce)(()=>{Vt()},1e3,!0);this.registerEvent(this.app.metadataCache.on("resolve",r=>n())),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.toggleStateHeaderCount(),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWLivePreview(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{let r=this.app.metadataCache.on("resolved",async()=>{var i;Vt(),this.app.metadataCache.offref(r),(i=this.app.workspace.getLeavesOfType(De))!=null&&i.length||await this.app.workspace.getRightLeaf(!1).setViewState({type:De,active:!1})})})}async layoutChangeEvent(){An()}async activateView(n,r,i,o){this.lastSelectedReferenceKey=r,this.lastSelectedReferenceType=n,this.lastSelectedReferenceFilePath=i,this.lastSelectedLineNumber=o,this.app.workspace.rightSplit.expand(),await this.app.workspace.getLeavesOfType(De)[0].view.updateView(),setTimeout(()=>{this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(De)[0])},100)}toggleStateHeaderCount(){let n=this.settings.displayIncomingFilesheader;n===!0&&(n=this.snwPluginActivelyShowingCounts),n===!0?this.app.workspace.on("layout-change",this.layoutChangeEvent):this.app.workspace.off("layout-change",this.layoutChangeEvent)}toggleStateSNWMarkdownPreview(){let n=this.settings.displayInlineReferencesMarkdown;n===!0&&(n=this.snwPluginActivelyShowingCounts),n==!0&&this.markdownPostProcessorSNW===null?this.markdownPostProcessorSNW=this.registerMarkdownPostProcessor((r,i)=>Ln(r,i)):(oe.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessorSNW),this.markdownPostProcessorSNW=null)}toggleStateSNWLivePreview(){let n=this.settings.displayInlineReferencesLivePreview;n===!0&&(n=this.snwPluginActivelyShowingCounts),this.updateCMExtensionState("inline-ref",n,Rr)}toggleStateSNWGutters(){let n=oe.Platform.isMobile||oe.Platform.isMobileApp?this.settings.displayEmbedReferencesInGutterMobile:this.settings.displayEmbedReferencesInGutter;n===!0&&(n=this.snwPluginActivelyShowingCounts),this.updateCMExtensionState("gutter",n,Wr)}updateCMExtensionState(n,r,i){if(r==!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let o=0;o<this.editorExtensions.length;o++)if(this.editorExtensions[o].snwID===n){this.editorExtensions.splice(o,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},_r,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log("unloading "+this.appName);try{oe.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessorSNW),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};
